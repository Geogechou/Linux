# 用户
## Linux用户分类
* 超级用户：拥有最高权限
* 系统用户：与系统服务相关，但不能用于登录
* 普通用户：由超级用户创建并赋予权限，只能操作其拥有权限的文件和目录，只能管理自己启动的进程。
## 用户信息
* 用户名：唯一，由字母，数字和符号组成
* 口令
* 用户ID(uid):每个用户拥有的唯一识别号码，超级用户为0，系统用户为1-499,普通用户从500开始
* 用户组ID(gid)
* 用户主目录
* 全称：用户账号的附加信息，可以为空
* 登录Shell：默认使用Bash
## 用户账号信息文件(/etc/passwd)
* 文件中每一行为一个用户的信息
* 从左到右依次为(注册名:口令：用户标识号：组标识号：用户主目录：命令解释程序)
* 口令字段用x来填充，加密后的口令保存在/etc/shadow文件中
## 用户口令信息文件(/etc/shadow)
* shadow 文件只有超级用户才能查看并修改其内容，且加密存储
## 用户组
* Linux将相同特性的用户划归为同一用户组，可以大大简化用户的管理，方便用户之间文件的共享，任何用户都至少属于一个用户组。
* 一个用户只能属于一个用户组，但可以同时属于多个附加组。用户不仅拥有其用户组的权限，还同时拥有其附加组的权限。
* 用户组包括系统用户组和私人用户组。   
## 用户组账号信息文件(/etc/group)
* 每一行为一个用户组信息
* 文件中各字段依次是(用户组名：口令：用户组ID：附加用户列表)
## 用户组口令信息文件(/etc/gshadow)
## useradd|新增用户
* 功能：新建用户账号(超级用户可用)
* 格式：`useradd [参数] <用户名>`  
    *  -d 指定用户登入时的主目录
    *  -e 账号终止日期
    *  -g 指定账户所属的用户组
    *  -G 指定账号所属的附加组
    *  -s 指定账号登录后所使用的shell
    *  -u 指定用户ID号
* 例子：新建一个用户zhangsan，用户组为adm  
    `$ useradd -g adm zhangsan`
## passwd|修改用户口令
* 修改用户密码`passwd zhangsan`
* 删除口令  `passwd -d zhangsan`
* 锁定/解锁用户账号 `passwd -l zhangsan`    
    `passwd -u zhangsan`
* 显示用户账号状态 `passwd -S zhangsan`
## usermod命令|修改用户的属性
* 功能：修改用户的属性(超级用户可用)
* 格式：`usermod [参数] <用户名>`  
    * -d 指定用户登入时的主目录
    * -e 账号终止日期
    * -g 指定账户所属的用户组
    * -G 指定账户所属的附加组
    * -s 指定账户登录后所使用的shell
    * -u 指定用户ID号
    * -l 用于修改用户名
* 例子：`usermod -I zhangs zhangsan`,将zhangsan修改为zhangs
## userdel|删除用户
* 功能：删除指定的用户账号(超级用户)
* 格式: `userdel [参数] <用户名>`   
    * -r:不仅删除用户账号，还删除用户主目录和本地邮件存储的目录或文件
    * -f：删除用户登入目录以及目录中所有文件
* 如果删除用户属于私人组群，且该群组没有其他用户，族群也一并删除
* 正在使用系统的用户不能删除
## su|切换用户身份
* 功能：切换用户身份
* 格式：`su <用户名>`   
    * 超级用户可以切换任何普通用户，且不输入口令。普通用户切换为其他用户需要输入被转换用户的口令
    * 使用exit可以返回本来的用户身份
## id
* 功能：插烂用户的UID、GID和用户所属组的信息，如果不指定用户，则显示当前用户的相关信息。　　
* 格式 `id <用户名>`
## whoamis|查看当前用户名
## w|查看当前登录的用户详细信息
## groupadd|新建组
* 格式：
    * -g：指定用户组ID
    * -o：允许组ID号不唯一
 * 例子：
 新建一个组，ID为3145，名为cjx`groupadd -g 3145 cjx`
## groupmod|修改组的属性
* 功能：修改指定用户组的属性(超级用户权限)
* 格式：`groupmod [参数] <用户组名>`   
    * -g： 指定新的用户组ID
    * -n: 指定新的用户组名字
    * -o：允许组ID号不为1
* 例子：更改组名
将cjx组更名为cjxx，`groupmod -n cjxx cjx`
## groupdel|删除指定用户组
* 格式： `groupdel <用户组名>`
* 注意：在删除指定用户组之前必须保证该用户组不是任何用户的主要组群，否则要先删除主要组群的用户才能删除该用户组
<hr/>

## 文件权限管理
执行权，对于目录而言，就是允许进入的权限。  
## 文件用户分类
* 文件所有者：建立文件和目录的用户
* 文件所有者所在组用户：文件所有者所属用户组中的其他用户
* 其他用户：既不是文件所有者，也不是文件所有组所在组的其他用户
* 超级用户：负责整个系统的管理和维护，拥有系统中所有文件的全部访问权限。
## 文件权限表示法
![权限](https://github.com/Geogechou/imageRepo/raw/master/linux/linux1.png)   
## chmod|修改文件访问权限
* 格式：`chomod <模式> <文件>`
* 模式
    * 对象： u文件所有者，g同组用户，o其他用户
    * 操作符：+增加，-删除，=赋予并且取消其他权限
    * 权限：r读，w写，x执行，s设置用户ID
* 例子  
    * 取消同组用户对file文件的写入权限
    `chomod g-w file`
    * 将pict目录的访问权限设置为775
    `chmod 775 pict`
    * 设置file文件的设置用户ID位
    `chomod u+s file`
使用`ls -l test.txt`查看文件详细信息。   
## chown|修改文件所有者
* 功能：将指定文件的拥有者改为指定的用户或用户组
* 格式：`chown [选项] <所有者/组><文件>..`
    * -c 显示更改的部分信息
    * -f 忽略错误信息
    * -h，修复符号链接
    * -R 处理指定目录以及其子目录下的所有文件
    * -v 显示详细的处理信息
    * 用户是用户名或者用户ID，用户组也是
    * 文件时以空格分开的要改变权限的文件列表，支持通配符
 * 例子
    * 将ex1的所有者由geoge改为xiaoming
    `chown chown xiaoming test_chown.txt`
## chgrp|修改文件的所属组
    sudo chgrp chgrp_test test_chmod.txt
修改test_chmod.txt所属组为chgrp_test  
